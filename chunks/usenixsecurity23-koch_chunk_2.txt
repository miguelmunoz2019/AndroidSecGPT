# 3 The Makings of Legal Consent
Due to localization and consequent expertise, we perform our analysis and research in the context of European Union (EU) laws and, thus, the EU GDPR , which does not necessarily reflect the UK GDPR post BREXIT.

The GDPR is the EU privacy law protecting consumers from unwanted data collection and processing. It went into effect in 2016 with a grace period until 2018 . While the GDPR as a law gives general direction on what constitutes personal data, processing, and consent, its specific interpretation and enforcement is done by the Data Protection Agencies (DPAs). The GDPR is not only binding for companies within the EU but also includes companies outside the EU if they process data of people within the EU related to the offering of goods and services, or the monitoring of behavior . In this section, we first introduce required vocabulary, then state the
# 3 What Constitutes Personal Data and Processing?
Article 2(1) GDPR specifies what constitutes personal data and processing. Personal data is any information relating to an identified or identifiable natural person and processing is defined as any operation performed on personal data, including collection, recording, and storage. This means that in essence, any data that can be connected to a natural person (data subject) and is accessed by an organization (data controller) falls under the GDPR. This even applies to pseudonymous data (Recital 26(2) GDPR), i.e., data that can be linked to a person in combination with other data (Article 4(5) GDRP). Rulings have even applied this to IP addresses as those could be attributed to a person by obtaining ISP records.

The GDPR also defines the role of data processor. While the data controller is the party that determines the purposes and means for which data is collected (Article 4(7) GDPR), a data processor is any party that processes the data on behalf of the controller (Article 4(8) GDPR). The GDPR requires data controllers to enter into data processing agreements with any employed data processor (Article 28(3) GDPR), to document this relationship, containing specifications on the form of processing. However, the liable party for the processing is the data collector.

Processing of properly anonymized data is not restricted by the GDPR (Recital 26(5) GDPR). Ways of such an anonymization can include statistical aggregation, or collection of information not related to a person such as application settings. However, research has shown that even a few benign data points presumed to be anonymous can be leveraged to uniquely identify a person  and that fingerprinting via settings can be used to identify a unique device . The GDPR requires considering such indirect deanonymization before collection.

# 3 What Constitutes Proper Consent?
Processing of any personal data is generally prohibited by the GDPR unless there is a legal basis, with the GDPR providing a conclusive list (Article 6(1)(a-f) GDPR): (a) Consent by the data subject, (b) contractual necessity, (c) legal necessity such as know your customer laws, (d) necessity to protect a person’s vital interests, (e) tasks in the public interest, usually by public authorities, (f) legitimate interests by the controller outweighing the data subject’s interests and fundamental rights.

In the context of mobile applications and our analysis focus of traffic directed at known trackers (Section 6) lit. c, d, and e do not apply. Article 6(1)(c) GDPR does not apply as we are not opening up a bank account or otherwise moving into a business relationship with the company developing the app, we simply start the app and at most interact with the privacy dialog. Article 6(1)(d) GDPR does not apply as by simply starting the app one cannot construe any vital necessity or interest of ours to protect. Article 6(1)(e) GDPR does not apply as we are analyzing the traffic directed at known trackers which does not include any official authority. Furthermore, according to data protection authorities lit. b, and f do not apply as a legal basis for tracking either . Consequently, only consent remains.

The GDPR lists five basic conditions that need to be met for consent to be considered valid (Article 4(11) GDPR). Consent has to be: (1) freely given as data subjects need to have a genuine and free choice to refuse or withdraw (Recital 42 GDPR); (2) specific for each purpose of processing (Recital 32 GDPR); (3) informed such as the data subject knows at least the identity of the controller and the purposes of the processing (Recital 42 GDPR); (4) unambiguous such that it is clear, concise, and not unnecessarily disruptive to the use of the service (Recital 32 GDPR); and an (5) affirmative action, with silence, pre-ticked boxes, or inactivity not constituting consent (Recital 32 GDPR).

Article 7 GDPR defines further criteria for the legality of consent, specifically that consent can only be obtained through a declaration also concerning other matters if it is clearly distinguishable from those other matters (Article 7(2) GDPR). Finally, Article 7(3) GDPR requires that consent has to be withdrawable at any time, that the data subject has to be informed that they can withdraw their consent at any time, and finally that withdrawing consent needs to be as easy as giving it.

Any collection based on consent in violation of those criteria is risking a GDPR violation.

# 3 Resulting Criteria Catalog for Valid Consent Dialogs
We have discussed the wording of the GDPR, what constitutes personal data and processing, as well as why data collection
for tracking in the context of mobile applications requires prior consent. Furthermore, we established criteria on what constitutes consent under the GDPR and that data collection for tracking, prior to or based on consent lacking the laid out criteria risks running afoul of the GDPR.

Part of the requirements for consent are subjective or at least require some form of context understanding such as the requirement for the consent to be specific, informed, or unambiguous. A machine cannot decide whether a given text contains sufficient information for the data subject to fulfill either of those requirements. However, a machine can analyze design choices that affect affirmative action and indicate whether a human user is coerced toward consenting.

We, thus, define five criteria based on our understanding of the GDPR that are required (i.e., a lower bound) for consent dialogs to be sufficient and that can be assessed by a machine:
1. refusing consent has to be possible with the same number of clicks as consenting 
2. buttons have to have clear and non ambiguous labels 
3. the dialog may not only provide a link or refer to information deeper in the consent flow 
4. it must be possible to directly refuse 
We consider our criteria 1, 2, and 3 to be backed by , which is a verdict of the LG Rostock, i.e., a German court of law, and thus a legal requirement. Criteria 4 is only backed by  on a FAQ provided by the bureau of data protection of Baden-Württemberg, and should thus be considered a best practice until a corresponding verdict has been delivered. The lack of either of those design criteria increases the work required by a user to refuse consent and thus nudges them towards consent. Previous literature has termed such design decisions in consent dialogs as ’Dark Patterns’ . We use this phrase accordingly to encompass violations of our set design criteria as each violation represents an additional challenge for the user to not give consent.

# 4 App Acquisition
Automatically downloading app files that can be run on a mobile phone is not trivial. The intended process by both iOS and Android is to use the provided app store on the phone as a logged-in user. In the app store, you can browse a selection of apps and the installation process is triggered by choosing to install the app within the app store. This process even registers the app to the user on iOS and an app that is not registered to a user account cannot be run by that account. Android does not have such a process and any application can be installed and run if one has access to the corresponding app binary (APK).

There exist different solutions to access large volumes of Android APKs  and it is possible to individually download them . The main challenge here is gaining information on the ranking of apps to focus any analysis on popular and thus widely used apps. For iOS, only manual solutions are known. Koch et al.  leveraged the 3u tool to manually download a large set of iOS apps but this approach is fairly cumbersome and labor-intensive. Consequently, we have two challenges: accessing the ranking of apps and subsequent download of identified apps of interest.